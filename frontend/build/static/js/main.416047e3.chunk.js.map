{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","userId","token","login","logout","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","MainHeader","children","NavLinks","auth","useContext","to","exact","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","ReactDom","MainNavigation","useState","drawerIsOpen","setDrawerIsOpen","closeDrawerHandler","Fragment","Users","React","lazy","NewPlace","UserPlaces","UpdatePlace","Auth","App","routes","settoken","tokenExpirationDate","setTokenExpirationDate","setUserId","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","path","Provider","value","fallback","render"],"mappings":"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","file":"static/js/main.416047e3.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext({\r\n\tisLoggedIn: false,\r\n\tuserId: null,\r\n\ttoken: null,\r\n\tlogin: () => {},\r\n\tlogout: () => {},\r\n});\r\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst Backdrop = (props) => {\r\n\treturn ReactDOM.createPortal(\r\n\t\t<div className=\"backdrop\" onClick={props.onClick}></div>,\r\n\t\tdocument.getElementById('backdrop-hook')\r\n\t);\r\n};\r\n\r\nexport default Backdrop;\r\n","import { useState, useCallback, useEffect } from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n\tconst [token, settoken] = useState(false);\r\n\tconst [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n\tconst [userId, setUserId] = useState(false);\r\n\r\n\tconst login = useCallback((uid, token, expirationDate) => {\r\n\t\tsettoken(token);\r\n\t\tsetUserId(uid);\r\n\t\tconst tokenExpirationDate =\r\n\t\t\texpirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n\t\tsetTokenExpirationDate(tokenExpirationDate);\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'userData',\r\n\t\t\tJSON.stringify({\r\n\t\t\t\tuserId: uid,\r\n\t\t\t\ttoken: token,\r\n\t\t\t\texpiration: tokenExpirationDate.toISOString(),\r\n\t\t\t})\r\n\t\t);\r\n\t}, []);\r\n\r\n\tconst logout = useCallback(() => {\r\n\t\tsettoken(null);\r\n\t\tsetUserId(null);\r\n\t\tsetTokenExpirationDate(null);\r\n\t\tlocalStorage.removeItem('userData');\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (token && tokenExpirationDate) {\r\n\t\t\tconst remainingTime =\r\n\t\t\t\ttokenExpirationDate.getTime() - new Date().getTime();\r\n\t\t\tlogoutTimer = setTimeout(logout, remainingTime);\r\n\t\t} else {\r\n\t\t\tclearTimeout(logoutTimer);\r\n\t\t}\r\n\t}, [token, logout, tokenExpirationDate]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst storedData = JSON.parse(localStorage.getItem('userData'));\r\n\t\tif (\r\n\t\t\tstoredData &&\r\n\t\t\tstoredData.token &&\r\n\t\t\tnew Date(storedData.expiration) > new Date()\r\n\t\t) {\r\n\t\t\tlogin(\r\n\t\t\t\tstoredData.userId,\r\n\t\t\t\tstoredData.token,\r\n\t\t\t\tnew Date(storedData.expiration)\r\n\t\t\t);\r\n\t\t}\r\n\t}, [login]);\r\n\r\n\treturn {\r\n\t\ttoken,\r\n\t\tlogin,\r\n\t\tlogout,\r\n\t\tuserId,\r\n\t};\r\n};\r\n","import React from 'react';\r\n\r\nimport './MainHeader.css';\r\n\r\nconst MainHeader = (props) => {\r\n\treturn <header className=\"main-header\">{props.children}</header>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React, { useContext } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { AuthContext } from '../../context/auth-context';\r\n\r\nimport './NavLinks.css';\r\n\r\nconst NavLinks = () => {\r\n\tconst auth = useContext(AuthContext);\r\n\treturn (\r\n\t\t<ul className=\"nav-links\">\r\n\t\t\t<li>\r\n\t\t\t\t<NavLink to=\"/\" exact>\r\n\t\t\t\t\tAll Users\r\n\t\t\t\t</NavLink>\r\n\t\t\t</li>\r\n\r\n\t\t\t{auth.isLoggedIn && (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink to={`/${auth.userId}/places`}>My Places</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t)}\r\n\r\n\t\t\t{auth.isLoggedIn && (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink to=\"/places/new\">Add Place</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t)}\r\n\t\t\t{auth.isLoggedIn && <button onClick={auth.logout}>Logout</button>}\r\n\r\n\t\t\t{!auth.isLoggedIn && (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<NavLink to=\"/auth\">Authenticate</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t)}\r\n\t\t</ul>\r\n\t);\r\n};\r\n\r\nexport default NavLinks;\r\n","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport './SideDrawer.css';\r\n\r\nconst SideDrawer = (props) => {\r\n\tconst content = (\r\n\t\t<CSSTransition\r\n\t\t\tin={props.show}\r\n\t\t\ttimeout={200}\r\n\t\t\tclassNames=\"slide-in-left\"\r\n\t\t\tmountOnEnter\r\n\t\t\tunmountOnExit\r\n\t\t>\r\n\t\t\t<aside className=\"side-drawer\" onClick={props.onClick}>\r\n\t\t\t\t{props.children}\r\n\t\t\t</aside>\r\n\t\t</CSSTransition>\r\n\t);\r\n\r\n\treturn ReactDom.createPortal(\r\n\t\tcontent,\r\n\t\tdocument.getElementById('drawer-hook')\r\n\t);\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './MainNavigation.css';\r\nimport MainHeader from './MainHeader';\r\nimport NavLinks from './NavLinks';\r\nimport SideDrawer from './SideDrawer';\r\nimport Backdrop from '../UIElements/Backdrop';\r\n\r\nconst MainNavigation = (props) => {\r\n\tconst [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n\r\n\tconst openDrawerHandler = () => {\r\n\t\tsetDrawerIsOpen(true);\r\n\t};\r\n\tconst closeDrawerHandler = () => {\r\n\t\tsetDrawerIsOpen(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\r\n\r\n\t\t\t<SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\r\n\t\t\t\t<nav className=\"main-navigation__drawer-nav\">\r\n\t\t\t\t\t<NavLinks />\r\n\t\t\t\t</nav>\r\n\t\t\t</SideDrawer>\r\n\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"main-navigation__menu-btn\"\r\n\t\t\t\t\tonClick={openDrawerHandler}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span />\r\n\t\t\t\t\t<span />\r\n\t\t\t\t\t<span />\r\n\t\t\t\t</button>\r\n\t\t\t\t<h1 className=\"main-navigation__title\">\r\n\t\t\t\t\t<Link to=\"/\">underrated 2 spotlight</Link>\r\n\t\t\t\t</h1>\r\n\t\t\t\t<nav className=\"main-navigation__header-nav\">\r\n\t\t\t\t\t<NavLinks />\r\n\t\t\t\t</nav>\r\n\t\t\t</MainHeader>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default MainNavigation;\r\n","import React, { Suspense } from 'react';\nimport {\n\tBrowserRouter as Router,\n\tRoute,\n\tRedirect,\n\tSwitch,\n} from 'react-router-dom';\n\nimport './index.css';\n// import Users from './user/pages/Users';\n// import NewPlace from './places/pages/NewPlace';\nimport MainNavigation from './shared/components/Navigation/MainNavigation.js';\n// import UserPlaces from './places/pages/UserPlaces';\n// import UpdatePlace from './places/pages/UpdatePlace';\n// import Auth from './user/pages/Auth';\nimport { AuthContext } from './shared/context/auth-context';\nimport { useAuth } from './shared/hooks/auth-hook';\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner';\n\nconst Users = React.lazy(() => import('./user/pages/Users'));\nconst NewPlace = React.lazy(() => import('./places/pages/NewPlace'));\nconst UserPlaces = React.lazy(() => import('./places/pages/UserPlaces'));\nconst UpdatePlace = React.lazy(() => import('./places/pages/UpdatePlace'));\nconst Auth = React.lazy(() => import('./user/pages/Auth'));\n\nfunction App() {\n\tconst { token, login, logout, userId } = useAuth();\n\n\tlet routes;\n\tif (token) {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Users />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/:userId/places\" exact>\n\t\t\t\t\t<UserPlaces />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/places/new\" exact>\n\t\t\t\t\t<NewPlace />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/places/:placeId\" exact>\n\t\t\t\t\t<UpdatePlace />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t);\n\t} else {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Users />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/:userId/places\" exact>\n\t\t\t\t\t<UserPlaces />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/auth\" exact>\n\t\t\t\t\t<Auth />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/auth\" />\n\t\t\t</Switch>\n\t\t);\n\t}\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tisLoggedIn: !!token,\n\t\t\t\ttoken: token,\n\t\t\t\tuserId: userId,\n\t\t\t\tlogin: login,\n\t\t\t\tlogout: logout,\n\t\t\t}}\n\t\t>\n\t\t\t<Router>\n\t\t\t\t<MainNavigation />\n\t\t\t\t<main>\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t\t\t<LoadingSpinner />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{routes}\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</Router>\n\t\t</AuthContext.Provider>\n\t);\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}